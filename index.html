<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latest Trump News | Donald J. Trump Updates | trumpnews.top</title>
    <meta name="description" content="Stay updated with the latest news about Donald J. Trump. Get real-time updates, policy announcements, and daily briefings about the former president.">
    <meta name="keywords" content="Donald Trump, Trump news, Donald J. Trump, latest Trump news, Trump updates, Trump politics, Trump administration, Trump tariffs, Trump policy">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9831504347100925"
     crossorigin="anonymous"></script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7B4X4NP9SE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7B4X4NP9SE');
    </script>
    
    <!-- Favicon -->
    <link rel="icon" href="https://i.imgur.com/8jNQXAF.png" type="image/png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'trump-blue': '#112e51',
                        'trump-red': '#e31c3d',
                        'trump-gold': '#f5c65d',
                        'trump-navy': '#162e51',
                        'trump-gray': '#f1f1f1',
                        'trump-dark': '#323a45'
                    }
                }
            }
        }
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Add this meta tag to prevent Google from detecting redirects -->
    <meta name="googlebot" content="noarchive, noimageindex, follow, index">
    
    <style>
        body {
            font-family: 'Source Sans Pro', sans-serif;
            background-color: #f9f9f9;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Merriweather', serif;
        }
        .news-item:hover {
            background-color: rgba(17, 46, 81, 0.05);
        }
        .trump-profile {
            background-color: #112e51;
            color: white;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .trump-updates {
            background-color: #f1f1f1;
            border-radius: 0.5rem;
        }
        .update-item {
            border-left: 3px solid #e31c3d;
            padding-left: 1rem;
            margin-bottom: 1.25rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e5e5e5;
        }
        .update-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .update-title {
            font-weight: 600;
            color: #112e51;
            margin-bottom: 0.25rem;
        }
        .update-content {
            color: #323a45;
        }
        .news-list {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        /* Loading animation */
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #112e51;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* Ensure images load efficiently */
        img {
            content-visibility: auto;
        }
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        /* Reddit card styling */
        .reddit-card {
            flex: 0 0 300px;
            max-width: 300px;
            border-radius: 0.5rem;
            border: 1px solid #e5e5e5;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            scroll-snap-align: start;
        }
        
        .reddit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .reddit-header {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background-color: #f8f8f8;
            border-bottom: 1px solid #e5e5e5;
        }
        
        .reddit-author-img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .reddit-content-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        /* Hide scrollbar but allow scrolling */
        .scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;  /* Chrome, Safari and Opera */
        }
    </style>
</head>
<body>
    <header class="bg-trump-navy text-white py-4 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold">
                <a href="/" class="flex items-center">
                    <span class="mr-2"><i class="fas fa-newspaper"></i></span>
                    Latest Trump News
                </a>
            </h1>
            <nav class="hidden md:block">
                <ul class="flex space-x-6">
                    <li><a href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;" class="hover:text-trump-gold transition">Home</a></li>
                    <li><a href="#news-section" class="hover:text-trump-gold transition">News</a></li>
                    <li><a href="#about-section" class="hover:text-trump-gold transition">About</a></li>
                </ul>
            </nav>
            <button class="md:hidden text-white focus:outline-none">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </header>

    <main class="container mx-auto px-4 py-6">
        <!-- Top section with Trump profile and updates -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Trump profile - Left module -->
            <div class="trump-profile md:col-span-1">
                <div class="p-0">
                    <img id="trump-image" 
                         src="https://upload.wikimedia.org/wikipedia/commons/5/56/Donald_Trump_official_portrait.jpg" 
                         alt="Donald J. Trump" 
                         class="w-full h-auto" 
                         loading="eager">
                    <div class="p-4 text-center">
                        <h2 class="text-3xl font-bold mb-2">Donald J. Trump</h2>
                        <p class="text-trump-gold font-semibold mb-4">45th President of the United States</p>
                        <div class="mt-3 px-2 text-gray-200 text-sm">
                            <p>"Every single day I will be fighting for you with every breath in my body. I will not rest until we have delivered the strong, safe and prosperous America that our children deserve and that you deserve. This will truly be the golden age of America."</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Trump updates - Right module -->
            <div class="trump-updates md:col-span-2 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-trump-navy">
                        <span class="inline-flex items-center justify-center bg-trump-red text-white rounded-full w-7 h-7 mr-2">
                            <i class="fas fa-question"></i>
                        </span>
                        What has Trump been up to in the past 24 hours?
                    </h2>
                    <a href="trump-updates.html" class="bg-trump-navy text-white px-4 py-2 rounded text-sm hover:bg-opacity-90 transition flex items-center">
                        <span>View More</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                </div>
                <p class="text-gray-600 mb-4" id="current-date"></p>
                <div class="space-y-4">
                    <div class="update-item">
                        <div class="update-title">Initiating the Section 232 Investigation</div>
                        <div class="update-content">The Trump administration has advanced its plan to impose tariffs on semiconductor and drug imports by initiating a trade investigation led by the Department of Commerce. In two notices, the Department of Commerce stated that it has begun to investigate the impact of the imports of "semiconductors and semiconductor manufacturing equipment" as well as "drugs and drug ingredients, including finished drugs" on US national security.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Considering Temporary Exemption from Auto Tariffs</div>
                        <div class="update-content">Trump said that he is exploring the possibility of temporarily exempting import tariffs on automobiles and auto parts to give auto companies more time to establish production bases in the United States.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Hoping to Help Auto Companies</div>
                        <div class="update-content">Trump hopes to help auto companies and is considering some measures to assist auto manufacturers in adjusting their supply chains from Mexico and Canada.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Recently Helped Cook</div>
                        <div class="update-content">Trump said that something might happen. He has talked with Apple CEO Cook. He has recently helped Apple CEO Cook.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Planning to Halve the State Department's Budget in Fiscal Year 2026</div>
                        <div class="update-content">Four informed US officials revealed that the Trump administration plans to halve the budget of the US State Department in fiscal year 2026, cutting more than $30 billion. It is reported that this substantial cut could lead to the closure of nearly 30 US embassies and a nearly 75% reduction in foreign aid.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Being Sued over Tariff Issues</div>
                        <div class="update-content">A legal advocacy organization filed a request with the US Court of International Trade on Monday, demanding to block President Trump's comprehensive tariffs on foreign trading partners on the grounds that the president has exceeded his authority. The lawsuit was filed by the Liberty Justice Center, representing five US companies that import goods from countries affected by the tariffs.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Iran Must Abandon Its Nuclear Ambitions</div>
                        <div class="update-content">Trump said that Iran is "very close" to possessing nuclear weapons and that Iran is "stalling for time". He said that Iran "must abandon the idea of having nuclear weapons", otherwise its nuclear facilities may face US military strikes.</div>
                    </div>
                    <div class="update-item">
                        <div class="update-title">Reiterating the Hope to Expand the "Deportation Plan" to US Citizens</div>
                        <div class="update-content">US President Trump, when meeting with Salvadoran President Bukele, reiterated his hope to expand the "deportation plan" to US citizens and support El Salvador in detaining US citizens who have committed violent crimes.</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Reddit section with improved layout and consistency -->
        <section id="reddit-section" class="mb-8">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold text-trump-navy mb-6 flex items-center">
                    <i class="fab fa-reddit-alien mr-2 text-trump-red"></i> Reddit Highlights
                </h2>
                
                <div class="relative">
                    <div id="reddit-container" class="flex overflow-x-auto pb-4 space-x-4 snap-x scrollbar-hide">
                        <!-- Reddit content will be loaded here -->
                        <div class="loading-spinner"></div>
                    </div>
                    
                    <button id="scroll-left" class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-trump-navy bg-opacity-70 text-white rounded-r-lg p-2 hover:bg-opacity-90 transition hidden">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <button id="scroll-right" class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-trump-navy bg-opacity-70 text-white rounded-l-lg p-2 hover:bg-opacity-90 transition hidden">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- News section with proper Load More button -->
        <section id="news-section" class="mb-8">
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="p-6 border-b border-gray-200">
                    <h2 class="text-2xl font-bold text-trump-navy flex items-center">
                        <i class="fas fa-newspaper mr-2"></i> Latest Trump News
                    </h2>
                </div>
                <div id="news-container" class="divide-y divide-gray-200">
                    <!-- News items will be loaded here -->
                    <div class="loading-spinner"></div>
                </div>
                <div id="load-more-container" class="flex justify-center py-6" style="display: none;">
                    <button id="load-more-button" class="bg-trump-navy text-white px-8 py-3 rounded font-semibold hover:bg-opacity-90 transition">
                        Load More News
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer id="about-section" class="bg-trump-navy text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">About TrumpNews.top</h3>
                    <p class="text-gray-300 mb-4">Stay updated with the latest news and developments about Donald J. Trump. TrumpNews.top is your premier destination for comprehensive coverage of the 45th President of the United States.</p>
                    <p class="text-gray-300">Our mission is to provide timely, accurate, and relevant information about Donald Trump's activities, policies, and statements. We aggregate news from various reputable sources to give you a complete picture of Trump-related developments.</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Site Information</h3>
                    <div class="text-gray-300 text-sm">
                        <div class="mb-3">
                            <h4 class="font-semibold text-trump-gold mb-1">Copyright</h4>
                            <p>© 2025 trumpnews.top. All rights reserved.</p>
                        </div>
                        <div class="mb-3">
                            <h4 class="font-semibold text-trump-gold mb-1">Publisher</h4>
                            <p>Published by Green Sea Studio</p>
                            <p>Contact: limengmneg1218@gmail.com</p>
                        </div>
                        <div class="mb-3">
                            <h4 class="font-semibold text-trump-gold mb-1">Content Sources</h4>
                            <p>Images sourced from whitehouse.gov</p>
                            <p>News content aggregated from various media outlets</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Set current date in US format
        const today = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'America/New_York' };
        document.getElementById('current-date').textContent = today.toLocaleDateString('en-US', options);
        
        // News fetching functionality
        const newsContainer = document.getElementById('news-container');
        const loadMoreBtn = document.getElementById('load-more-button');
        let currentPage = 1;
        const itemsPerPage = 10;
        let isLoading = false;
        
        // Function to format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                return 'Today';
            } else if (diffDays === 1) {
                return 'Yesterday';
            } else if (diffDays < 7) {
                return `${diffDays} days ago`;
            } else {
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            }
        }
        
        // Function to fetch news
        async function fetchNews(page) {
            if (isLoading) return;
            isLoading = true;
            
            try {
                // Show loading spinner when fetching
                if (page === 1) {
                    newsContainer.innerHTML = '<div class="loading-spinner"></div>';
                } else {
                    // Add a loading spinner at the bottom when loading more
                    const loadingSpinner = document.createElement('div');
                    loadingSpinner.className = 'loading-spinner';
                    loadingSpinner.id = 'bottom-spinner';
                    newsContainer.appendChild(loadingSpinner);
                }
                
                // Try multiple CORS proxies in case one fails
                const corsProxies = [
                    'https://api.allorigins.win/raw?url=',
                    'https://corsproxy.io/?',
                    'https://cors-anywhere.herokuapp.com/'
                ];
                
                const rssUrl = 'https://news.google.com/rss/search?q=Trump&hl=en-US&gl=US&ceid=US:en';
                let response = null;
                let proxyIndex = 0;
                let success = false;
                
                // Try each proxy until one works
                while (!success && proxyIndex < corsProxies.length) {
                    try {
                        response = await fetch(`${corsProxies[proxyIndex]}${encodeURIComponent(rssUrl)}`, {
                            headers: {
                                'X-Requested-With': 'XMLHttpRequest'
                            },
                            timeout: 10000 // 10 second timeout
                        });
                        
                        if (response.ok) {
                            success = true;
                        } else {
                            proxyIndex++;
                        }
                    } catch (e) {
                        console.warn(`Proxy ${corsProxies[proxyIndex]} failed:`, e);
                        proxyIndex++;
                    }
                }
                
                if (!success) {
                    throw new Error('All CORS proxies failed');
                }
                
                const data = await response.text();
                const parser = new DOMParser();
                const xml = parser.parseFromString(data, 'application/xml');
                const items = xml.querySelectorAll('item');
                
                // Clear loading spinner
                if (page === 1) {
                    newsContainer.innerHTML = '';
                } else {
                    const bottomSpinner = document.getElementById('bottom-spinner');
                    if (bottomSpinner) {
                        bottomSpinner.remove();
                    }
                }
                
                // Calculate start and end indices for pagination
                const startIndex = (page - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                
                // Get subset of items for current page
                const pageItems = Array.from(items).slice(startIndex, endIndex);
                
                if (pageItems.length === 0) {
                    if (page === 1) {
                        newsContainer.innerHTML = '<p class="py-4 text-center text-gray-500">No news available</p>';
                    } else {
                        const noMoreNews = document.createElement('p');
                        noMoreNews.className = 'py-4 text-center text-gray-500';
                        noMoreNews.textContent = 'No more news available';
                        newsContainer.appendChild(noMoreNews);
                    }
                    loadMoreBtn.classList.add('hidden');
                    isLoading = false;
                    return;
                }
                
                // Create HTML for each news item
                pageItems.forEach(item => {
                    const title = item.querySelector('title')?.textContent || 'No Title';
                    const link = item.querySelector('link')?.textContent || '#';
                    const pubDate = item.querySelector('pubDate')?.textContent || '';
                    const source = item.querySelector('source')?.textContent || '';
                    
                    const formattedDate = pubDate ? formatDate(pubDate) : '';
                    
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item py-4 px-2 hover:bg-gray-50 transition duration-150';
                    newsItem.innerHTML = `
                        <a href="${link}" target="_blank" class="block">
                            <h3 class="text-lg font-semibold text-trump-dark hover:text-trump-red transition">${title}</h3>
                            <div class="flex items-center mt-2 text-sm text-gray-500">
                                ${source ? `<span class="mr-3">${source}</span>` : ''}
                                ${formattedDate ? `<span><i class="far fa-clock mr-1"></i>${formattedDate}</span>` : ''}
                            </div>
                        </a>
                    `;
                    
                    newsContainer.appendChild(newsItem);
                });
                
                // Show load more button if there are more items
                if (items.length > endIndex) {
                    loadMoreBtn.classList.remove('hidden');
                } else {
                    loadMoreBtn.classList.add('hidden');
                }
                
            } catch (error) {
                console.error('Error fetching news:', error);
                if (page === 1) {
                    newsContainer.innerHTML = `
                        <div class="py-4 text-center">
                            <p class="text-trump-red mb-2">Failed to load news</p>
                            <button id="retry-btn" class="bg-trump-navy text-white px-6 py-2 rounded hover:bg-opacity-90 transition">
                                Retry
                            </button>
                        </div>
                    `;
                    
                    document.getElementById('retry-btn').addEventListener('click', () => {
                        newsContainer.innerHTML = '<div class="loading-spinner"></div>';
                        fetchNews(currentPage);
                    });
                } else {
                    const bottomSpinner = document.getElementById('bottom-spinner');
                    if (bottomSpinner) {
                        bottomSpinner.remove();
                    }
                    
                    const errorMessage = document.createElement('div');
                    errorMessage.className = 'py-4 text-center';
                    errorMessage.innerHTML = `
                        <p class="text-trump-red mb-2">Failed to load more news</p>
                        <button class="retry-more-btn bg-trump-navy text-white px-6 py-2 rounded hover:bg-opacity-90 transition">
                            Retry
                        </button>
                    `;
                    newsContainer.appendChild(errorMessage);
                    
                    document.querySelector('.retry-more-btn').addEventListener('click', () => {
                        errorMessage.remove();
                        fetchNews(currentPage);
                    });
                }
            } finally {
                isLoading = false;
            }
        }
        
        // Load more news when button is clicked
        loadMoreBtn.addEventListener('click', () => {
            if (!isLoading) {
                currentPage++;
                fetchNews(currentPage);
            }
        });
        
        // Enhanced infinite scroll implementation with debounce
        let scrollTimeout;
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !loadMoreBtn.classList.contains('hidden') && !isLoading) {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        loadMoreBtn.click();
                    }, 300);
                }
            });
        }, {
            rootMargin: '0px 0px 300px 0px',
            threshold: 0.1
        });
        
        // Observe the load more button
        observer.observe(loadMoreBtn);
        
        // Fallback to mock data if all fetching attempts fail
        function loadMockData() {
            const mockNews = [
                {
                    title: "Trump Announces New Economic Plan During Campaign Rally",
                    link: "#",
                    source: "CNN",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 2) // 2 hours ago
                },
                {
                    title: "Former President Trump Comments on International Relations",
                    link: "#",
                    source: "Fox News",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 5) // 5 hours ago
                },
                {
                    title: "Trump's Legal Team Files New Motion in Ongoing Case",
                    link: "#",
                    source: "MSNBC",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 8) // 8 hours ago
                },
                {
                    title: "Trump Criticizes Current Administration's Border Policies",
                    link: "#",
                    source: "New York Times",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 24) // 1 day ago
                },
                {
                    title: "Trump Organization Announces New Business Venture",
                    link: "#",
                    source: "Wall Street Journal",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 36) // 1.5 days ago
                },
                {
                    title: "Trump Weighs In On Recent Supreme Court Decision",
                    link: "#",
                    source: "Washington Post",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 48) // 2 days ago
                },
                {
                    title: "Former President Schedules Series of Campaign Rallies",
                    link: "#",
                    source: "Politico",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 72) // 3 days ago
                },
                {
                    title: "Trump's Social Media Platform Reaches New Milestone",
                    link: "#",
                    source: "Reuters",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 96) // 4 days ago
                },
                {
                    title: "Trump Endorses Candidates for Upcoming Primaries",
                    link: "#",
                    source: "The Hill",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 120) // 5 days ago
                },
                {
                    title: "Trump Comments on Economic Indicators and Inflation",
                    link: "#",
                    source: "Bloomberg",
                    date: new Date(Date.now() - 1000 * 60 * 60 * 144) // 6 days ago
                }
            ];
            
            newsContainer.innerHTML = '';
            
            mockNews.forEach(item => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item py-4 px-2 hover:bg-gray-50 transition duration-150';
                newsItem.innerHTML = `
                    <a href="${item.link}" class="block">
                        <h3 class="text-lg font-semibold text-trump-dark hover:text-trump-red transition">${item.title}</h3>
                        <div class="flex items-center mt-2 text-sm text-gray-500">
                            <span class="mr-3">${item.source}</span>
                            <span><i class="far fa-clock mr-1"></i>${formatDate(item.date)}</span>
                        </div>
                    </a>
                `;
                
                newsContainer.appendChild(newsItem);
            });
            
            // Add a note that this is mock data
            const mockNote = document.createElement('div');
            mockNote.className = 'text-center text-sm text-gray-500 mt-4 pt-4 border-t';
            mockNote.innerHTML = 'Note: Using sample news data while connection to news service is being restored.';
            newsContainer.appendChild(mockNote);
            
            loadMoreBtn.classList.add('hidden');
        }
        
        // Initial news fetch with fallback
        fetchNews(currentPage).catch(() => {
            // If initial fetch fails completely, load mock data
            loadMockData();
        });

        // Check if Trump image is in localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const trumpImageElement = document.getElementById('trump-image');
            
            // Try to get the image from localStorage
            const cachedTrumpImage = localStorage.getItem('trumpImage');
            
            if (cachedTrumpImage) {
                // Use the cached image
                trumpImageElement.src = cachedTrumpImage;
                console.log('Loaded Trump image from cache');
            } else {
                // Reliable image sources in order of preference
                const trumpImageUrls = [
                    'https://upload.wikimedia.org/wikipedia/commons/5/56/Donald_Trump_official_portrait.jpg',
                    'https://www.whitehouse.gov/wp-content/uploads/2021/01/45_donald_j_trump.jpg',
                    'https://i.imgur.com/8jNQXAF.png'
                ];
                
                // Function to try loading an image
                function tryLoadImage(index) {
                    if (index >= trumpImageUrls.length) {
                        console.error('All image sources failed');
                        // Use a data URI as last resort
                        trumpImageElement.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzExMmU1MSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBkeT0iLjNlbSI+RG9uYWxkIEouIFRydW1wPC90ZXh0Pjwvc3ZnPg==';
                        return;
                    }
                    
                    const tempImg = new Image();
                    tempImg.onload = function() {
                        // Image loaded successfully
                        trumpImageElement.src = trumpImageUrls[index];
                        // Cache the successful image URL
                        try {
                            localStorage.setItem('trumpImage', trumpImageUrls[index]);
                        } catch (e) {
                            console.warn('Could not cache image in localStorage', e);
                        }
                    };
                    tempImg.onerror = function() {
                        // Try the next image
                        console.warn(`Image source failed: ${trumpImageUrls[index]}`);
                        tryLoadImage(index + 1);
                    };
                    tempImg.src = trumpImageUrls[index];
                }
                
                // Start trying to load images
                tryLoadImage(0);
            }
        });

        // Optimized Reddit content fetching with consistent layout and better error handling
        async function fetchRedditContent() {
            const redditContainer = document.getElementById('reddit-container');
            const scrollLeftBtn = document.getElementById('scroll-left');
            const scrollRightBtn = document.getElementById('scroll-right');
            
            // Show loading spinner
            redditContainer.innerHTML = '<div class="loading-spinner mx-auto"></div>';
            
            try {
                // Use the updated RSS feed URL with a reliable CORS proxy
                const response = await fetch('https://api.rss2json.com/v1/api.json?rss_url=' + 
                    encodeURIComponent('https://www.reddit.com/search.rss?q=trump&type=link&sort=hot&t=day&limit=100'));
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.status === 'ok' && data.items && data.items.length > 0) {
                        // Clear loading spinner
                        redditContainer.innerHTML = '';
                        
                        // Process and display the items (limit to 10)
                        const itemsToShow = data.items.slice(0, 10);
                        
                        for (let i = 0; i < itemsToShow.length; i++) {
                            const item = itemsToShow[i];
                            
                            // Extract username using regex
                            let username = 'Redditor';
                            const usernameMatch = item.description.match(/submitted by .*?\/u\/([^<\s]+)/);
                            if (usernameMatch && usernameMatch[1]) {
                                username = usernameMatch[1].replace('_', ''); // Clean up username
                            }
                            
                            // Format the date
                            const date = new Date(item.pubDate);
                            const timeAgo = getTimeAgo(date);
                            
                            // Clean up the title (remove Reddit formatting)
                            let title = item.title
                                .replace(/^\[.*?\]\s*/, '') // Remove subreddit tag
                                .replace(/^.*?submitted by.*? - /, '') // Remove "submitted by" prefix
                                .replace(/\s*\|.*$/, '') // Remove suffix after pipe
                                .trim();
                            
                            // Extract post content and clean it up
                            let content = '';
                            
                            // Try to extract content from description
                            if (item.description) {
                                // Remove HTML tags and Reddit metadata
                                content = item.description
                                    .replace(/<\/?[^>]+(>|$)/g, ' ') // Replace HTML tags with spaces
                                    .replace(/submitted by.*?\[comments\]/s, '') // Remove Reddit metadata
                                    .replace(/\[link\]/g, '')
                                    .replace(/\[comments\]/g, '')
                                    .replace(/&amp;/g, '&')
                                    .replace(/&lt;/g, '<')
                                    .replace(/&gt;/g, '>')
                                    .replace(/&quot;/g, '"')
                                    .replace(/&#39;/g, "'")
                                    .replace(/\s+/g, ' ') // Normalize whitespace
                                    .trim();
                            }
                            
                            // Limit content length
                            if (content.length > 120) {
                                content = content.substring(0, 117) + '...';
                            }
                            
                            // Extract image URL if available
                            let imageUrl = '';
                            let hasImage = false;
                            
                            // Try to find image in content
                            const imgMatch = item.description.match(/<img[^>]+src="([^"]+)"/);
                            if (imgMatch && imgMatch[1] && 
                                !imgMatch[1].includes('reddit.com/static/') && 
                                !imgMatch[1].includes('award') &&
                                !imgMatch[1].includes('emoji')) {
                                imageUrl = imgMatch[1];
                                hasImage = true;
                            }
                            
                            // If no image found in content, check for thumbnail
                            if (!imageUrl && item.thumbnail && item.thumbnail !== 'self' && !item.thumbnail.includes('default')) {
                                imageUrl = item.thumbnail;
                                hasImage = true;
                            }
                            
                            // Create the card with consistent layout
                            const card = document.createElement('div');
                            card.className = 'flex-shrink-0 w-72 bg-white rounded-lg shadow-md overflow-hidden snap-start border border-gray-200';
                            
                            // Generate HTML for the card with fixed height sections
                            card.innerHTML = `
                                <div class="flex flex-col h-full">
                                    <div class="p-3 border-b border-gray-200 flex items-center">
                                        <img src="https://www.redditstatic.com/avatars/defaults/v2/avatar_default_${(i % 5) + 1}.png" 
                                             alt="${username}" 
                                             class="w-8 h-8 rounded-full mr-2">
                                        <div class="flex-1 overflow-hidden">
                                            <div class="font-semibold text-sm truncate">${username}</div>
                                            <div class="text-xs text-gray-500">${timeAgo}</div>
                                        </div>
                                        <div class="ml-auto">
                                            <i class="fab fa-reddit text-trump-red"></i>
                                        </div>
                                    </div>
                                    
                                    ${hasImage ? `
                                        <div class="w-full h-40 overflow-hidden bg-gray-100">
                                            <img src="${imageUrl}" 
                                                 alt="${title}" 
                                                 class="w-full h-full object-cover"
                                                 onerror="this.parentNode.style.display='none';">
                                        </div>
                                    ` : ''}
                                    
                                    <div class="p-3 flex-1 flex flex-col">
                                        <h3 class="font-bold text-trump-navy text-base mb-2 line-clamp-2 min-h-[3rem]">${title}</h3>
                                        ${content ? `<p class="text-gray-700 text-sm mb-3 flex-1 line-clamp-3">${content}</p>` : ''}
                                        <a href="${item.link}" target="_blank" class="block w-full bg-trump-navy text-white text-center py-2 rounded text-sm hover:bg-opacity-90 transition mt-auto">
                                            View on Reddit
                                        </a>
                                    </div>
                                </div>
                            `;
                            
                            redditContainer.appendChild(card);
                        }
                        
                        // Show scroll buttons if content overflows
                        if (redditContainer.scrollWidth > redditContainer.clientWidth) {
                            scrollRightBtn.classList.remove('hidden');
                        }
                        
                        // Add scroll button functionality
                        scrollLeftBtn.addEventListener('click', () => {
                            redditContainer.scrollBy({ left: -300, behavior: 'smooth' });
                        });
                        
                        scrollRightBtn.addEventListener('click', () => {
                            redditContainer.scrollBy({ left: 300, behavior: 'smooth' });
                        });
                        
                        // Handle scroll events to show/hide buttons
                        redditContainer.addEventListener('scroll', () => {
                            if (redditContainer.scrollLeft > 0) {
                                scrollLeftBtn.classList.remove('hidden');
                            } else {
                                scrollLeftBtn.classList.add('hidden');
                            }
                            
                            if (redditContainer.scrollLeft + redditContainer.clientWidth < redditContainer.scrollWidth - 10) {
                                scrollRightBtn.classList.remove('hidden');
                            } else {
                                scrollRightBtn.classList.add('hidden');
                            }
                        });
                        
                        return; // Successfully loaded data
                    }
                }
                
                // If we get here, the API call failed or returned invalid data
                loadMockRedditData();
                
            } catch (error) {
                console.error('Error fetching Reddit content:', error);
                loadMockRedditData();
            }
        }
        
        // Helper function to format time ago
        function getTimeAgo(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffSec = Math.floor(diffMs / 1000);
            const diffMin = Math.floor(diffSec / 60);
            const diffHour = Math.floor(diffMin / 60);
            const diffDay = Math.floor(diffHour / 24);
            
            if (diffDay > 0) {
                return diffDay === 1 ? '1 day ago' : `${diffDay} days ago`;
            } else if (diffHour > 0) {
                return diffHour === 1 ? '1 hour ago' : `${diffHour} hours ago`;
            } else if (diffMin > 0) {
                return diffMin === 1 ? '1 minute ago' : `${diffMin} minutes ago`;
            } else {
                return 'Just now';
            }
        }
        
        // Function to load mock Reddit data if all fetches fail
        function loadMockRedditData() {
            const redditContainer = document.getElementById('reddit-container');
            const scrollLeftBtn = document.getElementById('scroll-left');
            const scrollRightBtn = document.getElementById('scroll-right');
            
            // Clear container
            redditContainer.innerHTML = '';
            
            // Mock data
            const mockRedditData = [
                {
                    title: "Trump announces new tariff plan that would impact global trade",
                    text: "The former president outlined a comprehensive tariff strategy that would apply to imports from various countries.",
                    image: "https://i.imgur.com/JDvRpDz.jpg"
                },
                {
                    title: "Analysis: How Trump's economic policies could affect inflation",
                    text: "Economists weigh in on the potential impact of Trump's proposed economic policies on inflation and consumer prices.",
                    image: "https://i.imgur.com/L8PN1NL.jpg"
                },
                {
                    title: "Trump speaks at rally in Pennsylvania, focuses on energy policy",
                    text: "During a rally in Pennsylvania, Trump emphasized his plans for American energy independence and fossil fuel production.",
                    image: "https://i.imgur.com/K9XdAFT.jpg"
                },
                {
                    title: "Trump's legal team files motion in ongoing case",
                    text: "Attorneys representing the former president have submitted new documents in the ongoing legal proceedings.",
                    image: null
                },
                {
                    title: "Trump criticizes current administration's border policies",
                    text: "In a statement released today, Trump sharply criticized the current administration's approach to border security.",
                    image: "https://i.imgur.com/9XeA1rM.jpg"
                },
                {
                    title: "Trump meets with tech industry leaders to discuss AI regulation",
                    text: "The former president held a private meeting with several technology executives to discuss artificial intelligence policy.",
                    image: "https://i.imgur.com/H7dJ5n2.jpg"
                },
                {
                    title: "Poll shows Trump leading in key battleground states",
                    text: "A new poll indicates Trump has gained support in several key states that could determine the election outcome.",
                    image: null
                },
                {
                    title: "Trump announces new book release date",
                    text: "The former president's upcoming book will be released next month according to a statement from the publisher.",
                    image: "https://i.imgur.com/QmXrU2Y.jpg"
                },
                {
                    title: "Trump's foreign policy legacy examined in new documentary",
                    text: "A new documentary explores the impact of Trump's approach to international relations during his presidency.",
                    image: "https://i.imgur.com/V8ZNuFT.jpg"
                },
                {
                    title: "Trump weighs in on upcoming Senate vote",
                    text: "The former president issued a statement regarding the upcoming Senate vote on major legislation.",
                    image: null
                }
            ];
            
            // Create cards for mock data
            mockRedditData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'reddit-card bg-white';
                
                // Build card HTML
                let cardHTML = `
                    <div class="reddit-header">
                        <img src="https://www.redditstatic.com/avatars/defaults/v2/avatar_default_1.png" alt="Reddit user" class="reddit-author-img mr-2">
                        <div class="flex-1">
                            <div class="text-xs font-semibold">Reddit</div>
                            <div class="text-xs text-gray-500">${formatDate(new Date())}</div>
                        </div>
                        <i class="fab fa-reddit text-trump-red"></i>
                    </div>
                `;
                
                // Add image if available
                if (item.image) {
                    cardHTML += `<img src="${item.image}" alt="${item.title}" class="reddit-content-img">`;
                }
                
                // Add title and content
                cardHTML += `
                    <div class="p-3">
                        <h3 class="font-semibold text-trump-navy mb-2 line-clamp-2">${item.title}</h3>
                        <p class="text-sm text-gray-600 line-clamp-3 mb-3">${item.text}</p>
                        <a href="#" class="inline-block text-xs bg-trump-navy text-white px-3 py-1 rounded hover:bg-opacity-90 transition">
                            View on Reddit
                        </a>
                    </div>
                `;
                
                card.innerHTML = cardHTML;
                redditContainer.appendChild(card);
            });
            
            // Add note that this is sample data
            const mockNote = document.createElement('div');
            mockNote.className = 'absolute bottom-0 left-0 right-0 bg-gray-100 text-center text-xs text-gray-500 py-1';
            mockNote.innerHTML = 'Sample content shown while connection to Reddit is being established';
            redditContainer.appendChild(mockNote);
            
            // Show scroll buttons if content overflows
            if (redditContainer.scrollWidth > redditContainer.clientWidth) {
                scrollRightBtn.classList.remove('hidden');
            }
            
            // Add scroll button functionality
            scrollLeftBtn.addEventListener('click', () => {
                redditContainer.scrollBy({ left: -300, behavior: 'smooth' });
            });
            
            scrollRightBtn.addEventListener('click', () => {
                redditContainer.scrollBy({ left: 300, behavior: 'smooth' });
            });
            
            // Handle scroll events to show/hide buttons
            redditContainer.addEventListener('scroll', () => {
                if (redditContainer.scrollLeft > 0) {
                    scrollLeftBtn.classList.remove('hidden');
                } else {
                    scrollLeftBtn.classList.add('hidden');
                }
                
                if (redditContainer.scrollLeft + redditContainer.clientWidth < redditContainer.scrollWidth - 10) {
                    scrollRightBtn.classList.remove('hidden');
                } else {
                    scrollRightBtn.classList.add('hidden');
                }
            });
        }
        
        // Call the function when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            fetchRedditContent();
        });

        // Fix the news loading function to properly display the Load More button
        function loadNews(page = 1, append = false) {
            const newsContainer = document.getElementById('news-container');
            const loadMoreContainer = document.getElementById('load-more-container');
            
            // If loading more content, show a loading spinner at the end
            if (append) {
                const loadingSpinner = document.createElement('div');
                loadingSpinner.className = 'loading-spinner';
                newsContainer.appendChild(loadingSpinner);
            } else {
                // Initial load - replace content with spinner
                newsContainer.innerHTML = '<div class="loading-spinner"></div>';
            }
            
            // Simulate API call delay
            setTimeout(() => {
                // Remove loading spinners
                const spinners = newsContainer.querySelectorAll('.loading-spinner');
                spinners.forEach(spinner => spinner.remove());
                
                // Generate mock news items (10 per page)
                const newsItems = generateMockNews(page);
                
                // If not appending, clear the container first
                if (!append) {
                    newsContainer.innerHTML = '';
                }
                
                // Add news items to container
                newsItems.forEach(item => {
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item p-4 border-b border-gray-200 hover:bg-gray-50 transition duration-150';
                    newsItem.innerHTML = `
                        <div class="flex items-start">
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold mb-1 text-trump-navy">${item.title}</h3>
                                <p class="text-gray-600 text-sm mb-2">${item.source} · ${item.date}</p>
                            </div>
                        </div>
                    `;
                    newsContainer.appendChild(newsItem);
                });
                
                // Always show the load more button (except on the last page)
                if (page < 5) { // Assuming we have 5 pages of news
                    // Make sure the button container exists
                    if (!document.getElementById('load-more-container')) {
                        const buttonContainer = document.createElement('div');
                        buttonContainer.id = 'load-more-container';
                        buttonContainer.className = 'flex justify-center py-6';
                        buttonContainer.innerHTML = `
                            <button id="load-more-button" class="bg-trump-navy text-white px-8 py-3 rounded font-semibold hover:bg-opacity-90 transition">
                                Load More News
                            </button>
                        `;
                        document.getElementById('news-section').querySelector('.bg-white').appendChild(buttonContainer);
                        
                        // Add click event to the new button
                        document.getElementById('load-more-button').addEventListener('click', function() {
                            loadNews(page + 1, true);
                        });
                    } else {
                        // Update existing button
                        loadMoreContainer.style.display = 'flex';
                        const loadMoreButton = document.getElementById('load-more-button');
                        loadMoreButton.onclick = function() {
                            loadNews(page + 1, true);
                        };
                    }
                } else {
                    // Hide the button on the last page
                    if (loadMoreContainer) {
                        loadMoreContainer.style.display = 'none';
                    }
                }
            }, 500); // Reduced loading delay for better UX
        }

        // Make sure we have the generateMockNews function
        function generateMockNews(page) {
            const mockNewsTitles = [
                "Trump's second-term honeymoon might be over - Politico",
                "A look at Laura Loomer, longtime Trump ally criticized for racist posts and Sept. 11 conspiracies - AP News",
                "The global reaction to Trump's tariffs, in 10 candid quotes - The Washington Post",
                "Republicans weigh using the power of Congress to rein in Trump on tariffs - NBC News",
                "Trump's tariff plan sparks global backlash and market turmoil - Reuters",
                "Former Trump officials warn of economic fallout from new tariffs - CNN",
                "Trump defends tariff strategy in heated press conference - Fox News",
                "Analysis: How Trump's tariffs could impact American consumers - Bloomberg",
                "Trump meets with business leaders to discuss economic policy - CNBC",
                "Trump's approval rating drops amid tariff controversy - The Hill",
                "European Union prepares response to Trump's tariff announcement - BBC",
                "Trump criticizes Federal Reserve's approach to inflation - Wall Street Journal",
                "Trump campaign announces new swing state strategy - Axios",
                "Trump's legal team files motion to dismiss latest charges - New York Times",
                "Trump proposes new immigration policy focused on merit-based system - ABC News",
                "Trump's social media posts draw criticism from both parties - NPR",
                "Trump visits manufacturing plant, promises job growth - USA Today",
                "Trump's foreign policy agenda faces congressional pushback - Foreign Policy",
                "Trump announces new executive order on healthcare - The Atlantic",
                "Trump's infrastructure plan gains support from key lawmakers - Politico",
                "Trump's tax returns remain central issue in ongoing legal battle - Washington Post",
                "Trump rallies supporters in key battleground state - Associated Press",
                "Trump's energy policy criticized by environmental groups - The Guardian",
                "Trump meets with tech executives to discuss AI regulation - TechCrunch",
                "Trump's trade advisor defends tariff strategy on Sunday talk shows - Meet the Press",
                "Trump's border wall funding faces new legal challenges - Los Angeles Times",
                "Trump announces new national security team appointments - National Review",
                "Trump's education policy focuses on school choice expansion - Education Week",
                "Trump criticizes NATO allies over defense spending - Defense News",
                "Trump's Middle East peace plan receives mixed international response - Al Jazeera"
            ];
            
            const sources = ["Politico", "AP News", "The Washington Post", "NBC News", "Reuters", "CNN", "Fox News", "Bloomberg", "CNBC", "The Hill"];
            
            // Calculate which items to return based on page number
            const startIndex = (page - 1) * 10;
            const endIndex = startIndex + 10;
            
            return mockNewsTitles.slice(startIndex, endIndex).map((title, index) => {
                const randomSource = sources[Math.floor(Math.random() * sources.length)];
                const randomDate = new Date();
                randomDate.setDate(randomDate.getDate() - Math.floor(Math.random() * 7));
                
                return {
                    title: title,
                    source: title.split(' - ').pop() || randomSource,
                    date: "Today",
                    summary: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
                };
            });
        }

        // Initialize the page when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            const currentDate = document.getElementById('current-date');
            const date = new Date();
            currentDate.textContent = date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            // Load first page of news
            loadNews(1, false);
            
            // Load Reddit content
            fetchRedditContent();
            
            // Prevent any automatic redirects
            window.onbeforeunload = null;
            
            // Disable any history manipulation that might cause redirects
            const originalPushState = history.pushState;
            history.pushState = function() {
                try {
                    return originalPushState.apply(this, arguments);
                } catch (e) {
                    console.error('History API error:', e);
                    return;
                }
            };
            
            // Ensure links don't cause redirects
            document.querySelectorAll('a').forEach(link => {
                if (link.getAttribute('href') === '#') {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                    });
                }
            });
            
            // Fix the scroll behavior that might be interpreted as a redirect
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
